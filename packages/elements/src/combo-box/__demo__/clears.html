<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <title>Combo Box</title>
    <script src="countries.js"></script>
  </head>
  <body>
    <script type="module">
      import '@refinitiv-ui/elements/combo-box';
      import '@refinitiv-ui/elements/datetime-picker';
      import '@refinitiv-ui/elements/email-field';
      import '@refinitiv-ui/elements/flag';
      import '@refinitiv-ui/elements/item';
      import '@refinitiv-ui/elements/number-field';
      import '@refinitiv-ui/elements/search-field';
      import '@refinitiv-ui/elements/select';
      import '@refinitiv-ui/elements/slider';
      import '@refinitiv-ui/elements/text-field';
      import '@refinitiv-ui/elements/tree-select';

      import '@refinitiv-ui/demo-block';
      import '@refinitiv-ui/demo-block/demo.css';

      // Dynamic import theme files from search params of the URL
      // Ex. http://localhost:3000?theme=halo&varint=dark will load halo-theme/dark
      const url = new URL(window.location);
      const theme = url.searchParams.get('theme') || 'halo';
      const variant = url.searchParams.get('variant') || 'light';

      if (!window.location.search) {
        url.searchParams.set('theme', theme);
        url.searchParams.append('variant', variant);
        window.location.search = url.searchParams.toString();
      }

      import(`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/css/native-elements.css`);
      import(`../../../lib/combo-box/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/item/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/number-field/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/search-field/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/text-field/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/select/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/tree-select/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/flag/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/slider/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/datetime-picker/themes/${theme}/${variant}/index.js`);
      import(`../../../lib/email-field/themes/${theme}/${variant}/index.js`);
    </script>
    <script type="module">
      // Translations
      import '@refinitiv-ui/phrasebook/locale/de/combo-box.js';
      import '@refinitiv-ui/phrasebook/locale/ja/combo-box.js';
      import '@refinitiv-ui/phrasebook/locale/zh-hant/combo-box.js';
      import '@refinitiv-ui/phrasebook/locale/zh/combo-box.js';
    </script>
    <script type="module">
      const makeData = (config = {}) => {
        if (config.selectionTooltip) {
          return Array(1001)
            .fill(0)
            .map((_, i) => ({
              type: 'text',
              label: `Item number ${i + 1}`,
              value: (i + 1).toString(),
              selected: true
            }));
        } else {
          return window.countries.reduce((countries, _, i) => {
            const lastItem = countries[countries.length - 1];
            if (!lastItem || lastItem.label[0] !== _.label[0]) {
              countries.push({
                type: 'header',
                label: `${_.label[0]}`
              });
            }
            countries.push({
              type: 'text',
              label: _.label,
              value: _.value,
              selected:
                config.selected || config.selected === undefined
                  ? i === 109 || (config.multiple && i === 1)
                  : false,
              disabled: config.disabled === undefined ? i % 10 === 7 : false,
              hidden: config.hidden === undefined ? i % 50 === 49 : false
            });
            return countries;
          }, []);
        }
      };
      window.makeData = makeData;

      document.querySelector('ef-combo-box').data = makeData({ multiple: true });
      document.querySelector('ef-tree-select').data = makeData({ multiple: true });
    </script>
    <demo-block header="Clearable + Placeholder" layout="normal" tags="clears, placeholder">
      <p>
        <label for="textField">Text field:</label>
        <ef-text-field id="textField" value="Welcome to my world" clears></ef-text-field>
      </p>
      <p>
        <label for="numberField">Number field:</label>
        <ef-number-field id="numberField" value="123456789" clears></ef-number-field>
      </p>
      <p>
        <label for="emailField">Email field:</label>
        <ef-email-field id="emailField" value="welcome_to_my@world" clears></ef-email-field>
      </p>
      <p>
        <label for="searchField">Search field:</label>
        <ef-search-field id="searchField" value="Welcome to my world" clears></ef-search-field>
      </p>
      <p>
        <label for="datetimePicker">Datetime picker:</label>
        <ef-datetime-picker id="datetimePicker" clears value="2024-05-22"></ef-datetime-picker>
      </p>
      <p>
        <label for="comboBox">Combo box:</label>
        <ef-combo-box id="comboBox" clears placeholder="Select..." values="[af,dz]" multiple></ef-combo-box>
      </p>
      <p>
        <label for="select">Select:</label>
        <ef-select id="select" clears>
          <ef-item value="Welcome to my world" selected>Welcome to my world</ef-item>
        </ef-select>
      </p>
      <p>
        <label for="treeSelect">Tree select:</label>
        <ef-tree-select id="treeSelect" clears placeholder="Select..." values="[af,dz]"></ef-tree-select>
      </p>
      <p>
        <label for="slider">Slider:</label>
        <ef-slider
          show-input-field
          clears
          range
          min="0"
          max="100"
          from="25"
          to="75"
          min-range="1"
        ></ef-slider>
      </p>
    </demo-block>
  </body>
</html>
