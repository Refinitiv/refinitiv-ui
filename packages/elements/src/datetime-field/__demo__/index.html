<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <title>Datetime Field</title>
    <link rel="stylesheet" href="/node_modules/@refinitiv-ui/demo-block/demo.css" />
  </head>
  <body>
    <script type="module">
      import '@refinitiv-ui/elements/datetime-field';

      import '@refinitiv-ui/demo-block';
      import '@refinitiv-ui/demo-block/demo.css';

      // Dynamic import theme files from search params of the URL
      // Ex. http://localhost:3000?theme=halo&varint=dark will load halo-theme/dark
      const url = new URL(window.location);
      const theme = url.searchParams.get('theme') || 'halo';
      const variant = url.searchParams.get('variant') || 'light';

      if (!window.location.search) {
        url.searchParams.set('theme', theme);
        url.searchParams.append('variant', variant);
        window.location.search = url.searchParams.toString();
      }

      import(`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/css/native-elements.css`);
      import(`../../../lib/datetime-field/themes/${theme}/${variant}/index.js`);
    </script>

    <demo-block layout="normal" header="en-GB: Date Time Field" tags="default,time,value,en-GB">
      <ef-datetime-field value="1988-04-21" lang="en-GB"></ef-datetime-field>
      <ef-datetime-field timepicker value="1988-04-21T06:49" lang="en-GB"></ef-datetime-field>
      <ef-datetime-field show-seconds value="1988-04-21T06:49:14" lang="en-GB"></ef-datetime-field>
      <ef-datetime-field am-pm value="1988-04-21T06:49" lang="en-GB"></ef-datetime-field>
    </demo-block>
    <demo-block layout="normal" header="Th: Date Time Field" tags="default,time,value,th">
      <ef-datetime-field value="1988-04-21" lang="th"></ef-datetime-field>
      <ef-datetime-field timepicker value="1988-04-21T06:49" lang="th"></ef-datetime-field>
      <ef-datetime-field show-seconds value="1988-04-21T06:49:14" lang="th"></ef-datetime-field>
      <ef-datetime-field am-pm value="1988-04-21T06:49" lang="th"></ef-datetime-field>
    </demo-block>
    <demo-block layout="normal" header="en-US: Date Time Field" tags="default,time,value,en-US">
      <ef-datetime-field value="1988-04-21" lang="en-US"></ef-datetime-field>
      <ef-datetime-field timepicker value="1988-04-21T06:49" lang="en-US"></ef-datetime-field>
      <ef-datetime-field show-seconds value="1988-04-21T06:49:14" lang="en-US"></ef-datetime-field>
    </demo-block>
    <demo-block layout="normal" header="Min/max values" tags="min,max">
      <ef-datetime-field placeholder="Max: 2022-02-28" lang="en-GB" max="2022-02-28"></ef-datetime-field>
      <ef-datetime-field
        timepicker
        placeholder="Max: 2022-02-28T12:00"
        lang="en-GB"
        max="2022-02-28T12:00"
      ></ef-datetime-field>
      <ef-datetime-field
        show-seconds
        placeholder="Min: 2022-02-28T12:00:00"
        lang="en-GB"
        min="2022-02-28T12:00:00"
      ></ef-datetime-field>
    </demo-block>
    <demo-block layout="normal" header="With Custom Format & Placeholder" tags="placeholder,format">
      <label for="appointment">Choose the appointment</label>
      <ef-datetime-field id="appointment" placeholder="Choose the appointment"></ef-datetime-field>
      <br />
      <label for="time">Enter time</label>
      <ef-datetime-field id="time" placeholder="Enter time"></ef-datetime-field>
      <br />
      <label for="month-year">Enter month</label>
      <ef-datetime-field id="month-year" placeholder="Enter month"></ef-datetime-field>
      <br />
      <label for="short-datetime">Short Datetime</label>
      <ef-datetime-field id="short-datetime" placeholder="Short Datetime"></ef-datetime-field>
      <script>
        (function () {
          const appointment = document.getElementById('appointment');
          appointment.formatOptions = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: 'numeric',
            minute: 'numeric',
            hour12: true,
            dayPeriod: 'long',
            era: 'long'
          };
          const time = document.getElementById('time');
          time.formatOptions = {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: true,
            fractionalSecondDigits: 3
          };
          const monthYear = document.getElementById('month-year');
          monthYear.formatOptions = {
            month: 'long',
            year: 'numeric'
          };
          const shortDateTime = document.getElementById('short-datetime');
          shortDateTime.formatOptions = {
            year: '2-digit',
            month: 'numeric',
            day: 'numeric',
            hour: 'numeric',
            minute: 'numeric'
          };
        })();
      </script>
    </demo-block>
    <demo-block layout="normal" header="Events" tags="event,value-changed,error-changed">
      <code>value-changed: <span id="event-value-page"></span></code>
      <br />
      <code>error-changed: <span id="event-error-page"></span></code>
      <script>
        (function () {
          const dateFields = document.querySelectorAll('ef-datetime-field');
          dateFields.forEach((field) => {
            field.addEventListener('value-changed', (event) => {
              document.getElementById('event-value-page').textContent = event.detail.value;
            });
            field.addEventListener('error-changed', (event) => {
              document.getElementById('event-error-page').textContent = event.detail.value;
            });
          });
        })();
      </script>
    </demo-block>
  </body>
</html>
