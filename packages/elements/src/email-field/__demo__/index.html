<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Email Field</title>
    <link rel="stylesheet" href="/node_modules/@refinitiv-ui/demo-block/demo.css">
  </head>
  <body>
    <script type="module">
      import '@refinitiv-ui/elements/email-field';
      import '@refinitiv-ui/demo-block';
    </script>

    <!-- DEFAULT -->
    <demo-block layout="normal" header="Default" tags="default">
      <p><ef-email-field placeholder="Default"></ef-email-field></p>
      <p><ef-email-field transparent placeholder="Default Transparent"></ef-email-field></p>
      <p><ef-email-field placeholder="Disabled" disabled></ef-email-field></p>
      <p><ef-email-field placeholder="Read Only" readonly></ef-email-field></p>
    </demo-block>

    <!-- DEFAULT (IN LINE ICON) -->
    <demo-block layout="normal" header="Default (In Line Icon)" tags="icon">
      <p><ef-email-field placeholder="Default" icon="email"></ef-email-field></p>
      <p><ef-email-field placeholder="Disabled" disabled icon="email"></ef-email-field></p>
      <p><ef-email-field placeholder="Read Only" readonly icon="email"></ef-email-field></p>
      <p><ef-email-field placeholder="Icon Has Action" icon="email" icon-has-action></ef-email-field></p>
    </demo-block>

    <!-- DEFAULT (IN LINE ICON, FIXED WIDTH) -->
    <demo-block layout="normal" header="Default (In Line Icon, Fixed Width)" tags="icon, fixed width">
      <p><ef-email-field style="width:200px;" placeholder="Default" icon="email"></ef-email-field></p>
      <p><ef-email-field style="width:200px;" placeholder="Disabled" disabled icon="email"></ef-email-field></p>
      <p><ef-email-field style="width:200px;" placeholder="Read Only" readonly icon="email"></ef-email-field></p>
    </demo-block>

    <!-- ERROR -->
    <demo-block layout="normal" header="Error" tags="error">
      <p><ef-email-field placeholder="Default" error></ef-email-field></p>
      <p><ef-email-field placeholder="Disabled" disabled error></ef-email-field></p>
      <p><ef-email-field placeholder="Read Only" readonly error></ef-email-field></p>
    </demo-block>

    <!-- WARNING -->
    <demo-block layout="normal" header="Warning" tags="warning">
      <p><ef-email-field placeholder="Default" warning></ef-email-field></p>
      <p><ef-email-field placeholder="Disabled" disabled warning></ef-email-field></p>
      <p><ef-email-field placeholder="Read Only" readonly warning></ef-email-field></p>
    </demo-block>

    <!-- MIN LENGTH -->
    <demo-block layout="normal" header="Minlength" tags="minlength">
      <p><ef-email-field class="minLengthValidation" placeholder="Minlength set to 5" minlength="5" value=""></ef-email-field></p>
      <p class="isLongEnough"></p>
    </demo-block>


    <!-- MAX LENGTH -->
    <demo-block layout="normal" header="Maxlength" tags="maxlength">
      <p><ef-email-field placeholder="Maxlength set to 5" maxlength="5" value=""></ef-email-field></p>
    </demo-block>

    <!-- PATTERN -->
    <demo-block layout="normal" header="Pattern expression" tags="pattern">
      <p><ef-email-field style="width:300px;" class="patternValidation" pattern='.+@mail.com' placeholder="Current pattern: .+@mail.com"></ef-email-field></p>
      <p class="isValid"></p>
      <script>
        let patternValidationInput = document.querySelector('.patternValidation');
        let isValidPTag = document.querySelector('.isValid');

        patternValidationInput.addEventListener('error-changed', function (e) {
          isValidPTag.innerHTML = `isValid: ${!e.detail.value}`;
        }, false);
      </script>
    </demo-block>

    <!-- MULTIPLE -->
    <demo-block layout="normal" header="Multiple" tags="multiple">
      <p><ef-email-field placeholder="Enter comma separated email addresses" multiple value=""></ef-email-field></p>
    </demo-block>

    <!-- FOCUS/BLUR -->
    <demo-block layout="normal" header="Focus/Blur" tags="focus/blur">
      <p><ef-email-field class="focusblur" placeholder="Focus/Blur"></ef-email-field></p>
      <p>
        <button onClick="focusblur.focus();">Focus</button>
        <button onClick="focusblur.blur();">Blur</button>
      </p>
      <p class="focusblurevent"></p>
      <script>
        const focusblur = document.querySelector('.focusblur');
        const focusblurevent = document.querySelector('.focusblurevent');

        focusblur.addEventListener('blur', function () {
          focusblurevent.innerHTML = '`blur` event triggered';
        }, false);

        focusblur.addEventListener('focus', function () {
          focusblurevent.innerHTML = '`focus` event triggered';
        }, false);
      </script>
    </demo-block>

    <!-- ICON HAS ACTION -->
    <demo-block layout="normal" header="Icon Has Action" tags="icon-has-action">
      <p>
        <ef-email-field class="icon-has-no-action" icon="calendar"
                          placeholder="Icon Has No Action"></ef-email-field>
      </p>
      <p>
        <ef-email-field class="icon-has-action" icon="calendar" placeholder="Icon Has Action"
                          icon-has-action></ef-email-field>
      </p>
      <p class="icon-click-event"></p>
      <script>
        const fieldWithoutAction = document.querySelector('.icon-has-action');
        const fieldWith = document.querySelector('.icon-has-action');
        const iconActionLogger = document.querySelector('.icon-click-event');
        let counter = 0;

        const loggerFunc = () => {
          iconActionLogger.innerHTML = `clicked: ${counter += 1} times`;
        };

        fieldWithoutAction.addEventListener('icon-click', loggerFunc);
        fieldWith.addEventListener('icon-click', loggerFunc);
      </script>
    </demo-block>

    <!-- Accessibility -->
    <demo-block header="Accessibility" layout="normal" tags="accessibility">
      <p>
        <label>Email Field 1</label>
        <ef-email-field aria-label="Email Field 1" aria-description="This field is using aria label"></ef-email-field>
      </p>
      <p>
        <label id="email2">Email Field 2</label>
        <ef-email-field aria-labelledby="email2" aria-description="This field is using aria labelled by"></ef-email-field>
      </p>
      <p>
        <label for="email3">Email Field 3</label>
        <ef-email-field id="email3" aria-description="This field is using label for and id"></ef-email-field>
      </p>
      <p>
        <label for="email4">Email Field 4</label>
        <ef-email-field id="email4" pattern='.+@mail.com' aria-describedby="helper-text error"></ef-email-field></p>
        <span hidden id="helper-text">Email pattern must contain .+@mail.com.</span>
        <span style="color:red" id="error"></span>
        <script>
          let emailAccessibleField = document.querySelector('#text4');
          let errorElment = document.querySelector('#error');

          emailAccessibleField.addEventListener('error-changed', function (e) {
            if (e.detail.value) {
              errorElment.innerHTML = 'Email is invalid.';
            }
            else {
              errorElment.innerHTML = '';
            }
          }, false);
        </script>
      </p>
    </demo-block>
  </body>
</html>
