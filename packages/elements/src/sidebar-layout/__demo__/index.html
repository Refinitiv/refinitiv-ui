<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8">
    <title>ef-sidebar-layout</title>
    <style>
      ef-sidebar-layout {
        height: 250px;
      }
      ef-sidebar-layout[collapsed] #toggleBtn {
        transform: rotateZ(180deg);
      }
      .long-content {
        height: 270px;
      }

    </style>
  </head>
  <body>
    <script type="module">
      import '@refinitiv-ui/demo-block';
      import '@refinitiv-ui/demo-block/demo.css';
      import '@refinitiv-ui/elements/sidebar-layout';
      import '@refinitiv-ui/elements/panel';
      import '@refinitiv-ui/elements/button';
      import '@refinitiv-ui/elements/header';

      // Dynamic import theme files from search params of the URL
      // Ex. http://localhost:3000?theme=halo&varint=dark will load halo-theme/dark
      const url = new URL(window.location);
      const theme = url.searchParams.get('theme') || 'halo';
      const variant = url.searchParams.get('variant') || 'light';
  
      if (!window.location.search) {
        url.searchParams.set('theme', theme);
        url.searchParams.append('variant', variant);
        window.location.search = url.searchParams.toString();
      }
  
      import (`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/css/native-elements.css`);
      import (`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/ef-sidebar-layout.js`);
      import (`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/ef-panel.js`);
      import (`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/ef-button.js`);
      import (`../../../../../node_modules/@refinitiv-ui/${theme}-theme/${variant}/ef-header.js`);
    </script>

    <demo-block header="Basic" layout="normal">
      <ef-sidebar-layout>
        <ef-header slot="sidebar-header" level="1">Sidebar Header</ef-header>
        <ef-panel slot="sidebar-content" spacing>Sidebar Content</ef-panel>
        <ef-header slot="main-header" level="1">Main Header</ef-header>
        <ef-panel slot="main-content" spacing>Main Content</ef-panel>
      </ef-sidebar-layout>
    </demo-block>
    <demo-block header="Sidebar Position" layout="normal">
      <ef-sidebar-layout id="sb-right" sidebar-position="right">
        <ef-header slot="sidebar-header" level="1">Sidebar Header</ef-header>
        <ef-panel slot="sidebar-content" spacing>Sidebar Content</ef-panel>
        <ef-header slot="main-header" level="1">Main Header</ef-header>
        <ef-panel slot="main-content" spacing>
          Main Content - <a href="javascript:void(0)">Toggle Sidebar</a>
        </ef-panel>
      </ef-sidebar-layout>
      <script>
        const sbRight = document.getElementById('sb-right');
        const toggleLink = sbRight.querySelector('a');
        toggleLink.addEventListener('click', function () {
          sbRight.collapsed = !sbRight.collapsed;
        });
      </script>
    </demo-block>
    <demo-block header="Long content" layout="normal">
      <ef-sidebar-layout>
        <ef-header slot="sidebar-header" level="1">Sidebar Header</ef-header>
        <ef-panel spacing slot="sidebar-content">Sidebar Content
          <div class="long-content"></div>
        </ef-panel>
        <ef-header slot="main-header" level="1">Main Header</ef-header>
        <ef-panel spacing slot="main-content">Main Content</ef-panel>
      </ef-sidebar-layout>
    </demo-block>
    <demo-block header="Toolbar" layout="normal">
      <ef-sidebar-layout>
        <ef-header slot="sidebar-header" level="1">Sidebar Header</ef-header>
        <ef-panel spacing slot="sidebar-content">Sidebar Content</ef-panel>
        <ef-header slot="main-header" level="1">Main Header
          <ef-button slot="right" transparent icon="dsc-add-to-gallery"></ef-button>
          <ef-button slot="right" transparent icon="dsc-remove-from-gallery"></ef-button>
        </ef-header>
        <ef-panel spacing slot="main-content">Main Content</ef-panel>
      </ef-sidebar-layout>
    </demo-block>

    <demo-block header="Collapsible" layout="normal">
      <ef-sidebar-layout id="collapseLayout">
        <ef-header slot="sidebar-header" level="1">Sidebar Header</ef-header>
        <ef-panel spacing slot="sidebar-content">Sidebar Content</ef-panel>
        <ef-header slot="main-header" level="1">Main Header
          <ef-button transparent slot="left" id="toggleBtn" icon="leftpanel-open"></ef-button>
          <ef-button slot="right" transparent icon="dsc-add-to-gallery"></ef-button>
          <ef-button slot="right" transparent icon="dsc-remove-from-gallery"></ef-button>
        </ef-header>
        <ef-panel spacing slot="main-content">Main Content</ef-panel>
      </ef-sidebar-layout>
    </demo-block>

    <script>
      customElements.whenDefined('ef-sidebar-layout').then(() => {
        var collapseLayout = document.querySelector('#collapseLayout');
        var toggleBtn = collapseLayout.querySelector('#toggleBtn');
        toggleBtn.addEventListener('click', e => {
          collapseLayout.collapsed = !collapseLayout.collapsed;
        });
      });
    </script>
  </body>
</html>
